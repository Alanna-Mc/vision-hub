{% extends "base.html" %}
{% block content %}

  <div class="page-container">

    <!-- To-Do List -->
    <div class="card mb-4">
      <div class="card-header bg-light">
        <h2 class="mb-0">Your Profile</h2>
      </div>
      <div class="card-body">
        <table class="table table-borderless mb-0">
          <tr>
            <th scope="row">Name</th>
            <td>{{ current_user.first_name|title }} {{ current_user.surname|title }}</td>
          </tr>
          <tr>
            <th scope="row">Email</th>
            <td>
              <a href="mailto:{{ current_user.username }}">
                {{ current_user.username }}
              </a>
            </td>
          </tr>
          <tr>
            <th scope="row">Job Title</th>
            <td>{{ current_user.job_title|title or 'â€”' }}</td>
          </tr>
          <tr>
            <th scope="row">Department</th>
            <td>{{ current_user.department.department_name|title }}</td>
          </tr>
          <tr>
            <th scope="row">Start Date</th>
            <td>{{ current_user.dateStarted.strftime('%d %b %Y') }}</td>
          </tr>
          {% if manager %}
          <tr>
            <th scope="row">Manager</th>
            <td>
              {{ manager.first_name|title }} {{ manager.surname|title }}
              (<a href="mailto:{{ manager.username }}">{{ manager.username }}</a>)
            </td>
          </tr>
          {% endif %}
        </table>
      </div>
    </div>
  
    <!-- To-Do List -->
    <div class="card mb-4">
      <div class="card-header bg-light">
        <h2 class="mb-0">To-Do</h2>
      </div>
      <div class="card-body">
        {% if to_do_list %}
          <ul class="list-group">
            {% for module in to_do_list %}
              <li class="list-group-item to-do-list">
                {{ module.module_title }}
                <a href="{{ url_for('take_training_module', module_id=module.id) }}"
                   class="to-do-list-btn">
                   Get Started
                </a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="mb-0">Nothing to do!</p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}

{% block specific_heading %}
  <h3 class="welcome-text">Welcome, {{ current_user.first_name|title }}</h3>
{% endblock %}
